import { ListView } from "std-widgets.slint";
import { Constants } from "constants.slint"; 
import { Deck } from "deck.slint";
import { DeckNode } from "types.slint";

component Menu {
    in property <int> due;

    HorizontalLayout {
        VerticalLayout {
            alignment: start;
            spacing: 5px;
            Text {
                text: "pbAnki";
                font-size: Constants.font_size_heading;
                font-weight: 800;
            }

            Text {
                text: due + " cards due";
            }
        }

        HorizontalLayout {
            alignment: end;
            TouchArea {
                Image {
                    source: @image-url("./icons/reload.svg");
                }

                clicked => {
                }
            }
        }
    }
}

export component MainWindow inherits Window {
    preferred-width: 500px;
    preferred-height: 400px;

    in-out property <[DeckNode]> deck_tree;

    VerticalLayout {
        padding: Constants.padding_standard;
        Menu { }

        ListView {
            for deck[index] in deck_tree: Deck {
                deck: deck;
                shown: deck_tree[deck.parent_index].collapsed == false;
                toggle => {
                    deck_tree[index].collapsed = !deck_tree[index].collapsed;
                }
            }
        }
    }
}
